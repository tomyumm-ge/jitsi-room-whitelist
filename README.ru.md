# –°–µ—Ä–≤–∏—Å –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∫–æ–º–Ω–∞—Ç Jitsi

**üîê –ù–∞–ø–∏—Å–∞–Ω–æ —Ä—É–∫–∞–º–∏, –∞ –Ω–µ –Ω–µ–π—Ä–æ–Ω–∫–æ–π**

–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π API-—Å–µ—Ä–≤–∏—Å –Ω–∞ –±–∞–∑–µ Express –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–æ–º–Ω–∞—Ç–∞–º Jitsi —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞. –°–µ—Ä–≤–∏—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∫–æ–º–Ω–∞—Ç, —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç endpoint –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Jitsi Meet (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ nginx auth_request).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç—ã—Ö (—á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã—Ö) –∏–ª–∏ —Å—Ç–æ–π–∫–∏—Ö (–∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö) –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–æ–º–Ω–∞—Ç
- **–í—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø**: –ö–æ–º–Ω–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—Ç–µ–∫–∞—é—Ç –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Endpoint –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–±—Ä–∞—Ç–Ω—ã–º–∏ –ø—Ä–æ–∫—Å–∏ (nginx –∏ –¥—Ä.) –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏**: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç –∏ —Ä—É—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –Ω–∞ TypeScript —Å Zod –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –ø—Ä–∏–º–µ—Ä–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:

```bash
cp .env.example .env
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `PORT` - –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3000)
- `SERVICE__PUBLIC_URL` - –ü—É–±–ª–∏—á–Ω—ã–π URL –≤–∞—à–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Jitsi (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://meet.example.com/`)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
npm run start:dev
```

### –ü—Ä–æ–¥–∞–∫—à–Ω

```bash
npm run build
npm start
```

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã

**POST** `/api/rooms`

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é –∫–æ–º–Ω–∞—Ç—É —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∫–∞—Å—Ç–æ–º–Ω—ã–º –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º ID.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "room_id": "my-room", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∫–∞—Å—Ç–æ–º–Ω—ã–π ID –∫–æ–º–Ω–∞—Ç—ã (–º–∏–Ω. 3 —Å–∏–º–≤–æ–ª–∞)
  "generate_variant": "simple", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: "simple" –∏–ª–∏ "strong" (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "simple")
  "generate_simple_sections": 2, // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—Ü–∏–π –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (1-8)
  "generate_strong_sections": 2, // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—Ü–∏–π –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (1-5)
  "generate_strong_symbols": 5, // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Å–µ–∫—Ü–∏–∏ (3-8)
  "duration_hours": 24 // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–æ–º–Ω–∞—Ç—ã –≤ —á–∞—Å–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 24)
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "success": true,
  "room_id": "1234-5678",
  "url": "https://meet.example.com/1234-5678",
  "expires_at": "2025-10-16T20:30:00.000Z"
}
```

**–ü—Ä–∏–º–µ—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**

- –ü—Ä–æ—Å—Ç–æ–π: `1234-5678` (—á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ 4-–∑–Ω–∞—á–Ω—ã–µ —Å–µ–∫—Ü–∏–∏)
- –°–ª–æ–∂–Ω—ã–π: `8f4b9-985c6` (–∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–µ hex-—Å—Ç—Ä–æ–∫–∏)

### –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç

**GET** `/api/rooms`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∫–æ–º–Ω–∞—Ç—ã.

**–û—Ç–≤–µ—Ç:**

```json
{
  "active_rooms": 2,
  "rooms": [
    {
      "room_id": "1234-5678",
      "created": "2025-10-15T20:30:00.000Z",
      "expires": "2025-10-16T20:30:00.000Z",
      "hits": 5
    }
  ]
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã

**DELETE** `/api/rooms/:room_id`

–í—Ä—É—á–Ω—É—é —É–¥–∞–ª—è–µ—Ç –∫–æ–º–Ω–∞—Ç—É –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞.

**–û—Ç–≤–µ—Ç:**

```json
{
  "success": true,
  "message": "Room deleted"
}
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞

**GET** `/auth/:room_id`

Endpoint –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –æ–±—Ä–∞—Ç–Ω—ã–º –ø—Ä–æ–∫—Å–∏. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 200, –µ—Å–ª–∏ –∫–æ–º–Ω–∞—Ç–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, 403 –µ—Å–ª–∏ –Ω–µ—Ç.

**–û—Ç–≤–µ—Ç:**

- `200 OK` - –ö–æ–º–Ω–∞—Ç–∞ –≤–∞–ª–∏–¥–Ω–∞ –∏ –∞–∫—Ç–∏–≤–Ω–∞
- `403 Forbidden` - –ö–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –∏—Å—Ç–µ–∫–ª–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

**GET** `/health`

Endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è –∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞.

**–û—Ç–≤–µ—Ç:**

```json
{
  "status": "ok",
  "active_rooms": 2
}
```

## –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Nginx Auth Request

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ nginx –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–º–Ω–∞—Ç Jitsi:

```nginx
location ~ ^/([a-zA-Z0-9-]+)$ {
    auth_request /auth;
    proxy_pass http://jitsi-backend;
}

location = /auth {
    internal;
    proxy_pass http://localhost:3000/auth/$1;
    proxy_pass_request_body off;
    proxy_set_header Content-Length "";
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ server.ts              # –û—Å–Ω–æ–≤–Ω–æ–π Express-—Å–µ—Ä–≤–µ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îú‚îÄ‚îÄ config.ts              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ utils.ts               # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID –∫–æ–º–Ω–∞—Ç
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ newRoomSchema.ts   # –°—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ shared.ts          # –û–±—â–∏–µ Zod-–≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
‚îî‚îÄ‚îÄ ts/
    ‚îî‚îÄ‚îÄ room.ts            # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Room
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Runtime**: Node.js
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Express 5
- **–Ø–∑—ã–∫**: TypeScript
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: Zod
- **–û–∫—Ä—É–∂–µ–Ω–∏–µ**: dotenv

## –õ–∏—Ü–µ–Ω–∑–∏—è

ISC
